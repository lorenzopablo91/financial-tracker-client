<mat-card class="evolution-chart-card">
    @if (loading()) {
    <!-- Skeleton mientras carga -->
    <div class="skeleton-chart-container">
        <div class="skeleton-chart-title"></div>
        <div class="skeleton-chart"></div>
    </div>
    } @else if (error()) {
    <!-- Mensaje de error -->
    <div class="error-chart-container">
        <mat-icon class="error-icon-small">error_outline</mat-icon>
        <span>{{ error() }}</span>
    </div>
    } @else if (!hasData()) {
    <!-- Sin datos -->
    <div class="chart-container">
        <div class="no-data">
            <mat-icon>show_chart</mat-icon>
            <p>No hay datos de evolución disponibles</p>
        </div>
    </div>
    } @else {
    <!-- Gráfico normal -->
    <div class="chart-header">
        <h3 class="chart-title">
            <mat-icon class="chart-icon">trending_up</mat-icon>
            <span>EVOLUCIÓN PORTAFOLIO</span>
        </h3>
    </div>

    <div class="period-buttons">
        <button mat-button [class.active]="selectedPeriod() === '3M'" (click)="setPeriod('3M')">3M</button>
        <button mat-button [class.active]="selectedPeriod() === '6M'" (click)="setPeriod('6M')">6M</button>
        <button mat-button [class.active]="selectedPeriod() === '1A'" (click)="setPeriod('1A')">1A</button>
        <button mat-button [class.active]="selectedPeriod() === 'TODO'" (click)="setPeriod('TODO')">TODO</button>
    </div>

    <div class="chart-container">
        <div class="chart-wrapper">
            <canvas #chartCanvas [attr.data-key]="canvasKey()"></canvas>
        </div>
    </div>
    }
</mat-card>