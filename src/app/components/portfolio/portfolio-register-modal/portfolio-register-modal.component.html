<div class="app-dialog create-portfolio-dialog">

    <mat-toolbar class="dialog-title" color="accent">
        <mat-icon>add_circle</mat-icon>
        <span>Crear Nuevo Portafolio</span>
    </mat-toolbar>

    <mat-dialog-content class="dialog-content">
        <form [formGroup]="portfolioForm" class="portfolio-form">
            <!-- Nombre -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Nombre del Portafolio</mat-label>
                <input matInput formControlName="nombre" maxlength="100" required
                    placeholder="Ej: Mi Portafolio de Inversiones" />
                <mat-icon matIconPrefix>wallet</mat-icon>
                <mat-hint align="end">{{ portfolioForm.get('nombre')?.value?.length || 0 }}/100</mat-hint>

                @if (portfolioForm.get('nombre')?.hasError('required') && portfolioForm.get('nombre')?.touched) {
                <mat-error>El nombre es obligatorio</mat-error>
                }
                @if (portfolioForm.get('nombre')?.hasError('minlength')) {
                <mat-error>Debe tener al menos 3 caracteres</mat-error>
                }
            </mat-form-field>
            <!-- Descripción -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Descripción</mat-label>
                <textarea matInput formControlName="descripcion" rows="3" maxlength="200"
                    placeholder="Describe brevemente tu portafolio..."></textarea>
                <mat-icon matIconPrefix>description</mat-icon>
                <mat-hint>Opcional</mat-hint>
                <mat-hint align="end">{{ portfolioForm.get('descripcion')?.value?.length || 0 }}/200</mat-hint>
            </mat-form-field>
            <!-- Capital inicial -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Capital Inicial (USD)</mat-label>
                <input matInput type="number" formControlName="capitalInicial" step="0.1" min="0" placeholder="0.00" />
                <mat-icon matIconPrefix>attach_money</mat-icon>
                <mat-hint>Opcional</mat-hint>
                @if (portfolioForm.get('capitalInicial')?.hasError('min')) {
                <mat-error>Debe ser mayor o igual a 0</mat-error>
                }
            </mat-form-field>
        </form>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
        <button mat-button type="button" (click)="onCancel()">
            Cancelar
        </button>
        <button mat-raised-button color="primary" type="button" (click)="onSubmit()">
            <span>Crear Portafolio</span>
        </button>
    </mat-dialog-actions>
</div>