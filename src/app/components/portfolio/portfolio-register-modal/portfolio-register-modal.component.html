<h2 mat-dialog-title class="dialog-title">
    <mat-icon>add_circle</mat-icon>
    <span>Crear Nuevo Portafolio</span>
</h2>

<mat-dialog-content class="dialog-content">
    <form [formGroup]="portfolioForm" class="portfolio-form">
        <!-- Campo Nombre (Obligatorio) -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nombre del Portafolio</mat-label>
            <input matInput formControlName="nombre" placeholder="Ej: Mi Portafolio de Inversiones" maxlength="100"
                required>
            <mat-icon matIconPrefix>wallet</mat-icon>
            <mat-hint align="end">{{ portfolioForm.get('nombre')?.value?.length || 0 }}/100</mat-hint>
            @if (portfolioForm.get('nombre')?.hasError('required') && portfolioForm.get('nombre')?.touched) {
            <mat-error>El nombre es obligatorio</mat-error>
            }
            @if (portfolioForm.get('nombre')?.hasError('minlength')) {
            <mat-error>El nombre debe tener al menos 3 caracteres</mat-error>
            }
        </mat-form-field>

        <!-- Campo Descripción (Opcional) -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Descripción</mat-label>
            <textarea matInput formControlName="descripcion" placeholder="Describe brevemente tu portafolio..." rows="3"
                maxlength="200"></textarea>
            <mat-icon matIconPrefix>description</mat-icon>
            <mat-hint align="end">{{ portfolioForm.get('descripcion')?.value?.length || 0 }}/200</mat-hint>
        </mat-form-field>

        <!-- Campo Capital Inicial en USD (Opcional) -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Capital Inicial (USD)</mat-label>
            <input matInput type="number" formControlName="capitalInicial" placeholder="0.00" step="0.1" min="0">
            <mat-icon matIconPrefix>attach_money</mat-icon>
            <mat-hint>Opcional: Define el monto inicial del portafolio en dólares</mat-hint>
            @if (portfolioForm.get('capitalInicial')?.hasError('min')) {
            <mat-error>El capital inicial debe ser mayor o igual a 0</mat-error>
            }
        </mat-form-field>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end" class="dialog-actions">
    <button mat-button type="button" (click)="onCancel()" [disabled]="isSubmitting()">
        Cancelar
    </button>
    <button mat-raised-button
        color="primary"
        type="button"
        class="create-button"
        (click)="onSubmit()"
        [disabled]="portfolioForm.invalid || isSubmitting()">

    <div class="btn-content" *ngIf="isSubmitting(); else createBlock">
        <mat-spinner diameter="20"></mat-spinner>
        <span>Creando...</span>
    </div>

    <ng-template #createBlock>
        <div class="btn-content">
            <mat-icon>add</mat-icon>
            <span>Crear Portafolio</span>
        </div>
    </ng-template>

</button>


</mat-dialog-actions>