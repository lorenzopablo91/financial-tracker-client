<div class="modal-header">
    <div class="header-content">
        <mat-icon [style.color]="getOperationColor()">{{ getOperationIcon() }}</mat-icon>
        <h2>{{ getOperationTitle() }}</h2>
    </div>
    <button mat-icon-button (click)="onCancel()" matTooltip="Cerrar">
        <mat-icon>close</mat-icon>
    </button>
</div>

<mat-dialog-content class="modal-content">
    <form [formGroup]="transactionForm" class="transaction-form">

        <!-- APORTE / RETIRO: Solo monto -->
        @if (data.operationType === 'APORTE' || data.operationType === 'RETIRO') {
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Monto en USD</mat-label>
            <input matInput type="number" formControlName="montoUSD" placeholder="0.00" step="0.01">
            <mat-icon matSuffix>attach_money</mat-icon>
            @if (transactionForm.get('montoUSD')?.hasError('required')) {
            <mat-error>El monto es requerido</mat-error>
            }
            @if (transactionForm.get('montoUSD')?.hasError('min')) {
            <mat-error>El monto debe ser mayor a 0</mat-error>
            }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Notas (opcional)</mat-label>
            <textarea matInput formControlName="notas" rows="3"
                placeholder="Agregar notas sobre esta operaciÃ³n..."></textarea>
            <mat-icon matSuffix>notes</mat-icon>
        </mat-form-field>
        }

    </form>
</mat-dialog-content>

<mat-dialog-actions class="modal-actions">
    <button mat-button (click)="onCancel()">
        Cancelar
    </button>
    <button mat-raised-button color="primary" (click)="onSubmit()"
        [disabled]="!transactionForm.valid || isSubmitting()">
        @if (isSubmitting()) {
        <mat-spinner diameter="20"></mat-spinner>
        <span>Procesando...</span>
        } @else {
        <span>{{ getSubmitButtonText() }}</span>
        }
    </button>
</mat-dialog-actions>