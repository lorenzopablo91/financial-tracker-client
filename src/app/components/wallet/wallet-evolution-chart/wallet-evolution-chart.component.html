<!-- wallet-evolution-chart.component.html -->
<mat-card class="evolution-chart-card">
    @if (loading()) {
    <!-- Estado de carga -->
    <div class="skeleton-chart-container">
        <div class="skeleton-chart-title"></div>
        <div class="skeleton-chart"></div>
    </div>
    } @else if (error()) {
    <!-- Estado de error -->
    <div class="error-chart-container">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <h3>Error al cargar gráfico</h3>
        <p>{{ error() }}</p>
        <button mat-raised-button color="primary" (click)="refreshChart()">
            <mat-icon>refresh</mat-icon>
            Reintentar
        </button>
    </div>
    } @else {
    <!-- Contenido normal -->
    <div class="chart-header">
        <div class="chart-title">
            <mat-icon class="chart-icon">show_chart</mat-icon>
            <span>EVOLUCIÓN DE BILLETERA</span>
        </div>
    </div>

    <!-- Botones de período -->
    <div class="period-buttons">
        <button mat-button [class.active]="selectedPeriod() === '3M'" (click)="setPeriod('3M')">3M</button>
        <button mat-button [class.active]="selectedPeriod() === '6M'" (click)="setPeriod('6M')">6M</button>
        <button mat-button [class.active]="selectedPeriod() === '1A'" (click)="setPeriod('1A')">1A</button>
        <button mat-button [class.active]="selectedPeriod() === 'TODO'" (click)="setPeriod('TODO')">TODO</button>
    </div>

    <div class="chart-container">
        @if (hasData()) {
        <div class="chart-wrapper">
            <canvas #chartCanvas></canvas>
        </div>
        } @else {
        <!-- Sin datos -->
        <div class="no-data">
            <mat-icon>show_chart</mat-icon>
            <p>No hay datos de evolución disponibles</p>
        </div>
        }
    </div>
    }
</mat-card>