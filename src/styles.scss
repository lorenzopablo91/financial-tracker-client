@use '@angular/material' as mat;

@include mat.core();

// Paleta primaria (Indigo suave que combina con el azul claro)
$primary-palette: mat.define-palette((50: #f3f4f6,
      100: #e5e7eb,
      200: #d1d5db,
      300: #9ca3af,
      400: #6b7280,
      500: #4f46e5,
      600: #4338ca,
      700: #3730a3,
      800: #312e81,
      900: #1e1b4b,
      A100: #e5e7eb,
      A200: #d1d5db,
      A400: #6b7280,
      A700: #4338ca,
      contrast: (50: rgba(black, 0.87),
        100: rgba(black, 0.87),
        200: rgba(black, 0.87),
        300: rgba(black, 0.87),
        400: white,
        500: white,
        600: white,
        700: white,
        800: white,
        900: white,
        A100: rgba(black, 0.87),
        A200: rgba(black, 0.87),
        A400: white,
        A700: white,
      )));

// Paleta accent basada en #e3f2fd (azul muy claro)
$accent-palette: mat.define-palette((50: #f8faff,
      100: #f1f5fe,
      200: #e8f0fd,
      300: #d4e6fb,
      400: #b8d4f8,
      500: #e3f2fd,
      600: #93c5ed,
      700: #60a5fa,
      800: #3b82f6,
      900: #1d4ed8,
      A100: #f1f5fe,
      A200: #e8f0fd,
      A400: #b8d4f8,
      A700: #93c5ed,
      contrast: (50: rgba(black, 0.87),
        100: rgba(black, 0.87),
        200: rgba(black, 0.87),
        300: rgba(black, 0.87),
        400: rgba(black, 0.87),
        500: rgba(black, 0.87),
        600: rgba(black, 0.87),
        700: rgba(black, 0.87),
        800: white,
        900: white,
        A100: rgba(black, 0.87),
        A200: rgba(black, 0.87),
        A400: rgba(black, 0.87),
        A700: rgba(black, 0.87),
      )));

// Paleta de advertencia (rojo estándar)
$warn-palette: mat.define-palette(mat.$red-palette);

// =======================
// CONFIGURACIÓN DEL TEMA
// =======================

$app-theme: mat.define-light-theme((color: (primary: $primary-palette,
        accent: $accent-palette,
        warn: $warn-palette ),
      typography: mat.define-typography-config($font-family: '"Inter", "Roboto", "Helvetica Neue", sans-serif',
        $headline-1: mat.define-typography-level(96px, 96px, 300, $letter-spacing: -0.05em),
        $headline-2: mat.define-typography-level(60px, 60px, 300, $letter-spacing: -0.02em),
        $headline-3: mat.define-typography-level(48px, 50px, 400),
        $headline-4: mat.define-typography-level(34px, 40px, 400),
        $headline-5: mat.define-typography-level(24px, 32px, 400),
        $headline-6: mat.define-typography-level(20px, 32px, 500),
        $subtitle-1: mat.define-typography-level(16px, 28px, 400),
        $subtitle-2: mat.define-typography-level(14px, 24px, 500),
        $body-1: mat.define-typography-level(16px, 24px, 400),
        $body-2: mat.define-typography-level(14px, 20px, 400),
        $caption: mat.define-typography-level(12px, 20px, 400),
        $button: mat.define-typography-level(14px, 16px, 500, $letter-spacing: 0.02em),
        $overline: mat.define-typography-level(10px, 16px, 400, $letter-spacing: 0.05em)),
      density: -1));

// Incluir el tema de Angular Material
@include mat.all-component-themes($app-theme);

// =======================
// VARIABLES CSS GLOBALES
// =======================

:root {
  // Colores principales
  --primary-50: #{mat.get-color-from-palette($primary-palette, 50)};
  --primary-100: #{mat.get-color-from-palette($primary-palette, 100)};
  --primary-200: #{mat.get-color-from-palette($primary-palette, 200)};
  --primary-300: #{mat.get-color-from-palette($primary-palette, 300)};
  --primary-400: #{mat.get-color-from-palette($primary-palette, 400)};
  --primary-500: #{mat.get-color-from-palette($primary-palette, 500)};
  --primary-600: #{mat.get-color-from-palette($primary-palette, 600)};
  --primary-700: #{mat.get-color-from-palette($primary-palette, 700)};
  --primary-800: #{mat.get-color-from-palette($primary-palette, 800)};
  --primary-900: #{mat.get-color-from-palette($primary-palette, 900)};

  // Colores accent
  --accent-50: #{mat.get-color-from-palette($accent-palette, 50)};
  --accent-100: #{mat.get-color-from-palette($accent-palette, 100)};
  --accent-200: #{mat.get-color-from-palette($accent-palette, 200)};
  --accent-300: #{mat.get-color-from-palette($accent-palette, 300)};
  --accent-400: #{mat.get-color-from-palette($accent-palette, 400)};
  --accent-500: #{mat.get-color-from-palette($accent-palette, 500)};
  --accent-600: #{mat.get-color-from-palette($accent-palette, 600)};
  --accent-700: #{mat.get-color-from-palette($accent-palette, 700)};
  --accent-800: #{mat.get-color-from-palette($accent-palette, 800)};
  --accent-900: #{mat.get-color-from-palette($accent-palette, 900)};

  // Colores de advertencia
  --warn-50: #{mat.get-color-from-palette($warn-palette, 50)};
  --warn-500: #{mat.get-color-from-palette($warn-palette, 500)};
  --warn-700: #{mat.get-color-from-palette($warn-palette, 700)};

  // Colores semánticos
  --success-color: #4caf50;
  --success-light: #e8f5e8;
  --success-dark: #2e7d32;

  --info-color: #2196f3;
  --info-light: #e3f2fd;
  --info-dark: #1565c0;

  --warning-color: #ff9800;
  --warning-light: #fff3e0;
  --warning-dark: #f57c00;

  --error-color: #{mat.get-color-from-palette($warn-palette, 500)};
  --error-light: #{mat.get-color-from-palette($warn-palette, 50)};
  --error-dark: #{mat.get-color-from-palette($warn-palette, 700)};

  // Colores neutrales
  --neutral-0: #ffffff;
  --neutral-50: #fafafa;
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;

  // Espaciado
  --spacing-xs: 0.25rem; // 4px
  --spacing-sm: 0.5rem; // 8px
  --spacing-md: 1rem; // 16px
  --spacing-lg: 1.5rem; // 24px
  --spacing-xl: 2rem; // 32px
  --spacing-2xl: 3rem; // 48px
  --spacing-3xl: 4rem; // 64px

  // Bordes y radios
  --border-radius-sm: 4px;
  --border-radius-md: 8px;
  --border-radius-lg: 12px;
  --border-radius-xl: 16px;
  --border-radius-full: 50%;

  // Sombras
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

  // Transiciones
  --transition-fast: 150ms ease-in-out;
  --transition-normal: 250ms ease-in-out;
  --transition-slow: 350ms ease-in-out;
}


// Card personalizada
.app-card {
  background: var(--neutral-0);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-md);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  border: 1px solid var(--neutral-200);
  transition: box-shadow var(--transition-normal);

  &:hover {
    box-shadow: var(--shadow-lg);
  }

  .app-card-header {
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--neutral-200);

    h2,
    h3 {
      margin: 0;
      color: var(--neutral-800);
    }
  }

  .app-card-content {
    margin-bottom: var(--spacing-md);
  }

  .app-card-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--neutral-200);
  }
}

// Botón personalizado
.app-btn {
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--border-radius-md);
  border: none;
  font-weight: 500;
  font-size: 14px;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);

  &:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  &:active {
    transform: translateY(0);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;

    &:hover {
      transform: none;
      box-shadow: none;
    }
  }

  &.app-btn-primary {
    background-color: var(--primary-500);
    color: white;

    &:hover {
      background-color: var(--primary-600);
    }
  }

  &.app-btn-accent {
    background-color: var(--accent-500);
    color: white;

    &:hover {
      background-color: var(--accent-600);
    }
  }

  &.app-btn-outline {
    background-color: transparent;
    border: 1px solid var(--primary-500);
    color: var(--primary-500);

    &:hover {
      background-color: var(--primary-500);
      color: white;
    }
  }
}

// Input personalizado
.app-input {
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--neutral-300);
  border-radius: var(--border-radius-md);
  font-size: 14px;
  transition: border-color var(--transition-fast);

  &:focus {
    outline: none;
    border-color: var(--primary-500);
    box-shadow: 0 0 0 2px rgba(63, 81, 181, 0.2);
  }

  &::placeholder {
    color: var(--neutral-500);
  }

  &:invalid {
    border-color: var(--error-color);

    &:focus {
      box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.2);
    }
  }
}

// Badge/Chip personalizado
.app-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--border-radius-full);
  font-size: 12px;
  font-weight: 500;

  &.app-badge-primary {
    background-color: var(--primary-100);
    color: var(--primary-700);
  }

  &.app-badge-success {
    background-color: var(--success-light);
    color: var(--success-dark);
  }

  &.app-badge-warning {
    background-color: var(--warning-light);
    color: var(--warning-dark);
  }

  &.app-badge-error {
    background-color: var(--error-light);
    color: var(--error-dark);
  }
}

// Layout principal
.app-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--spacing-md);
}

.app-header {
  background-color: var(--neutral-0);
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 0;
  z-index: 1000;

  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md) 0;
  }
}

// =======================
// RESPONSIVE BREAKPOINTS
// =======================

@media (max-width: 768px) {
  .app-container {
    padding: 0 var(--spacing-sm);
  }

  .app-card {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
  }

  .app-card-actions {
    flex-direction: column;

    .app-btn {
      width: 100%;
      justify-content: center;
    }
  }
}

// =======================
// ANIMACIONES
// =======================

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
  }

  to {
    transform: translateX(0);
  }
}

.animate-fade-in {
  animation: fadeIn var(--transition-normal) ease-out;
}

.animate-slide-in {
  animation: slideIn var(--transition-normal) ease-out;
}

// Toast/Snackbar styles para Angular Material 17+
.success-snackbar {
  --mdc-snackbar-container-color: #4caf50 !important;
  --mat-snack-bar-button-color: #ffffff !important;

  .mdc-snackbar__surface {
    background-color: #4caf50 !important;
  }

  .mdc-snackbar__label,
  .mat-mdc-snack-bar-label {
    color: white !important;
  }

  .mat-mdc-snack-bar-action {
    --mat-mdc-snack-bar-button-color: white !important;

    button {
      color: white !important;
    }
  }
}

.error-snackbar {
  --mdc-snackbar-container-color: #f44336 !important;
  --mat-snack-bar-button-color: #ffffff !important;

  .mdc-snackbar__surface {
    background-color: #f44336 !important;
  }

  .mdc-snackbar__label,
  .mat-mdc-snack-bar-label {
    color: white !important;
  }

  .mat-mdc-snack-bar-action {
    --mat-mdc-snack-bar-button-color: white !important;

    button {
      color: white !important;
    }
  }
}

.warning-snackbar {
  --mdc-snackbar-container-color: #ff9800 !important;
  --mat-snack-bar-button-color: #ffffff !important;

  .mdc-snackbar__surface {
    background-color: #ff9800 !important;
  }

  .mdc-snackbar__label,
  .mat-mdc-snack-bar-label {
    color: white !important;
  }

  .mat-mdc-snack-bar-action {
    --mat-mdc-snack-bar-button-color: white !important;

    button {
      color: white !important;
    }
  }
}

.info-snackbar {
  --mdc-snackbar-container-color: #2196f3 !important;
  --mat-snack-bar-button-color: #ffffff !important;

  .mdc-snackbar__surface {
    background-color: #2196f3 !important;
  }

  .mdc-snackbar__label,
  .mat-mdc-snack-bar-label {
    color: white !important;
  }

  .mat-mdc-snack-bar-action {
    --mat-mdc-snack-bar-button-color: white !important;

    button {
      color: white !important;
    }
  }
}

// ==== GLOBAL DIALOG STYLES ====

.app-dialog {
  width: 100%;
  max-width: 600px;
  min-width: 320px;
  display: flex;
  flex-direction: column;

  @media (min-width: 768px) {
    min-width: 400px;
  }

  // Title bar
  .dialog-title {
    padding: 0 16px;
    height: 56px;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 1px solid var(--neutral-200);

    mat-icon {
      font-size: 20px;
      width: 20px;
      height: 20px;
    }

    span {
      font-size: 1.2rem;
      font-weight: 500;
    }
  }

  // Content
  .dialog-content {
    padding: 16px 24px;
    flex: 1;
    overflow-y: auto;

    .message {
      font-size: 14px;
      line-height: 1.4;
    }
  }

  // Actions Footer
  mat-dialog-actions {
    padding: 12px 16px;
    border-top: 1px solid var(--neutral-200);
    display: flex;
    justify-content: flex-end;
    gap: 12px;

    button {
      min-width: 120px;
      display: inline-flex;
      align-items: center;
      gap: 6px;

      mat-icon,
      span {
        display: inline-flex;
        align-items: center;
      }
    }
  }
}

/* Cursor not-allowed en botones deshabilitados Angular Material 17+ */
.mdc-button--disabled,
.mat-mdc-button-disabled,
.mdc-elevated-button--disabled,
.mdc-text-button--disabled,
.mdc-outlined-button--disabled,
.mdc-filled-button--disabled {
  cursor: not-allowed !important;
  pointer-events: auto !important;
  /* permite hover cursor */
}

.mdc-button--disabled *,
.mat-mdc-button-disabled *,
.mdc-elevated-button--disabled *,
.mdc-text-button--disabled *,
.mdc-outlined-button--disabled *,
.mdc-filled-button--disabled * {
  cursor: not-allowed !important;
}